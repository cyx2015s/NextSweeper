import { TileData } from "../models/ClassicMineSweeper"

function makeTextColor(number: number): string {
  switch (number) {
    case 1:
      return '#0000FF'; // è“è‰²
    case 2:
      return '#008200'; // ç»¿è‰²
    case 3:
      return '#FF0000'; // çº¢è‰²
    case 4:
      return '#000084'; // æ·±è“è‰²
    case 5:
      return '#840000'; // æ£•è‰²
    case 6:
      return '#008284'; // é’è‰²
    case 7:
      return '#000000'; // é»‘è‰²
    case 8:
      return '#808080'; // ç°è‰²
    default:
      return '#000000'; // é»˜è®¤é»‘è‰²
  }
}

function makeText(tileData: TileData): string {
  if (tileData.flagged && !tileData.revealed) {
    return 'ðŸš©';
  } else if (!tileData.revealed) {
    return '';
  } else if (tileData.mine) {
    return 'ðŸ’£';
  } else if (tileData.number > 0) {
    return tileData.number.toString();
  } else {
    return '';
  }
}

function makeBackgroundColor(revealed: boolean): string {
  return revealed ? '#AAAAAA' : '#1177EE';
}

@ComponentV2
export struct Tile {
  @Param @Require tileData: TileData;

  build() {
    if (this.tileData == undefined) {
      Text()
        .width("64px")
        .height("64px")
    } else {
      Text(makeText(this.tileData))
        .fontWeight(FontWeight.Bold)
        .fontColor(makeTextColor(this.tileData.number))
        .fontSize("40px")
        .backgroundColor(makeBackgroundColor(this.tileData.revealed))
        .borderWidth("1px")
        .width("64px")
        .height("64px")
        .textAlign(TextAlign.Center)
    }
  }
}